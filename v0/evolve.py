def evolve_64_even(rule, src):
    dst = 0
    qind0 = ((src & 3) << 2) | ((src & 768) >> 4)
    res0 = ((rule & (15 << qind0)) >> qind0)
    dst |= (res0 & 3)
    dst |= ((res0 & 12) << 6)
    qind1 = (src & 12) | ((src & 3072) >> 6)
    res1 = ((rule & (15 << qind1)) >> qind1)
    dst |= ((res1 & 3) << 2)
    dst |= ((res1 & 12) << 8)
    qind2 = ((src & 48) >> 2) | ((src & 12288) >> 8)
    res2 = ((rule & (15 << qind2)) >> qind2)
    dst |= ((res2 & 3) << 4)
    dst |= ((res2 & 12) << 10)
    qind3 = ((src & 192) >> 4) | ((src & 49152) >> 10)
    res3 = ((rule & (15 << qind3)) >> qind3)
    dst |= ((res3 & 3) << 6)
    dst |= ((res3 & 12) << 12)
    qind4 = ((src & 196608) >> 14) | ((src & 50331648) >> 20)
    res4 = ((rule & (15 << qind4)) >> qind4)
    dst |= ((res4 & 3) << 16)
    dst |= ((res4 & 12) << 22)
    qind5 = ((src & 786432) >> 16) | ((src & 201326592) >> 22)
    res5 = ((rule & (15 << qind5)) >> qind5)
    dst |= ((res5 & 3) << 18)
    dst |= ((res5 & 12) << 24)
    qind6 = ((src & 3145728) >> 18) | ((src & 805306368) >> 24)
    res6 = ((rule & (15 << qind6)) >> qind6)
    dst |= ((res6 & 3) << 20)
    dst |= ((res6 & 12) << 26)
    qind7 = ((src & 12582912) >> 20) | ((src & 3221225472) >> 26)
    res7 = ((rule & (15 << qind7)) >> qind7)
    dst |= ((res7 & 3) << 22)
    dst |= ((res7 & 12) << 28)
    qind8 = ((src & 12884901888) >> 30) | ((src & 3298534883328) >> 36)
    res8 = ((rule & (15 << qind8)) >> qind8)
    dst |= ((res8 & 3) << 32)
    dst |= ((res8 & 12) << 38)
    qind9 = ((src & 51539607552) >> 32) | ((src & 13194139533312) >> 38)
    res9 = ((rule & (15 << qind9)) >> qind9)
    dst |= ((res9 & 3) << 34)
    dst |= ((res9 & 12) << 40)
    qind10 = ((src & 206158430208) >> 34) | ((src & 52776558133248) >> 40)
    res10 = ((rule & (15 << qind10)) >> qind10)
    dst |= ((res10 & 3) << 36)
    dst |= ((res10 & 12) << 42)
    qind11 = ((src & 824633720832) >> 36) | ((src & 211106232532992) >> 42)
    res11 = ((rule & (15 << qind11)) >> qind11)
    dst |= ((res11 & 3) << 38)
    dst |= ((res11 & 12) << 44)
    qind12 = ((src & 844424930131968) >> 46) | ((src & 216172782113783808) >> 52)
    res12 = ((rule & (15 << qind12)) >> qind12)
    dst |= ((res12 & 3) << 48)
    dst |= ((res12 & 12) << 54)
    qind13 = ((src & 3377699720527872) >> 48) | ((src & 864691128455135232) >> 54)
    res13 = ((rule & (15 << qind13)) >> qind13)
    dst |= ((res13 & 3) << 50)
    dst |= ((res13 & 12) << 56)
    qind14 = ((src & 13510798882111488) >> 50) | ((src & 3458764513820540928) >> 56)
    res14 = ((rule & (15 << qind14)) >> qind14)
    dst |= ((res14 & 3) << 52)
    dst |= ((res14 & 12) << 58)
    qind15 = ((src & 54043195528445952) >> 52) | ((src & 13835058055282163712) >> 58)
    res15 = ((rule & (15 << qind15)) >> qind15)
    dst |= ((res15 & 3) << 54)
    dst |= ((res15 & 12) << 60)
    return dst

def evolve_64_odd(rule, src_c, src_n, src_nw, src_w):
    dst_c = dst_n = dst_nw = dst_w = 0
    qind0 = ((src_nw & 9223372036854775808) >> 61) | ((src_n & 72057594037927936) >> 53) | ((src_w & 128) >> 3) | ((src_c & 1) << 5)
    res0 = ((rule & (15 << qind0)) >> qind0)
    dst_nw |= ((res0 & 1) << 63)
    dst_n |= ((res0 & 2) << 55)
    dst_w |= ((res0 & 4) << 5)
    dst_c |= ((res0 & 8) >> 3)
    qind1 = ((src_n & 432345564227567616) >> 55) | ((src_n & 6) << 3)
    res1 = ((rule & (15 << qind1)) >> qind1)
    dst_n |= ((res1 & 3) << 57)
    dst_c |= ((res1 & 12) >> 1)
    qind2 = ((src_n & 1729382256910270464) >> 57) | ((src_n & 24) << 1)
    res2 = ((rule & (15 << qind2)) >> qind2)
    dst_n |= ((res2 & 3) << 59)
    dst_c |= ((res2 & 12) << 1)
    qind3 = ((src_n & 6917529027641081856) >> 59) | ((src_n & 96) >> 1)
    res3 = ((rule & (15 << qind3)) >> qind3)
    dst_n |= ((res3 & 3) << 61)
    dst_c |= ((res3 & 12) << 3)
    qind4 = ((src_w & 32768) >> 13) | ((src_c & 256) >> 5) | ((src_w & 8388608) >> 19) | ((src_c & 65536) >> 11)
    res4 = ((rule & (15 << qind4)) >> qind4)
    dst_w |= ((res4 & 1) << 15)
    dst_c |= ((res4 & 2) << 7)
    dst_w |= ((res4 & 4) << 21)
    dst_c |= ((res4 & 8) << 13)
    qind5 = ((src_w & 2147483648) >> 29) | ((src_c & 16777216) >> 21) | ((src_w & 549755813888) >> 35) | ((src_c & 4294967296) >> 27)
    res5 = ((rule & (15 << qind5)) >> qind5)
    dst_w |= ((res5 & 1) << 31)
    dst_c |= ((res5 & 2) << 23)
    dst_w |= ((res5 & 4) << 37)
    dst_c |= ((res5 & 8) << 29)
    qind6 = ((src_w & 140737488355328) >> 45) | ((src_c & 1099511627776) >> 37) | ((src_w & 36028797018963968) >> 51) | ((src_c & 281474976710656) >> 43)
    res6 = ((rule & (15 << qind6)) >> qind6)
    dst_w |= ((res6 & 1) << 47)
    dst_c |= ((res6 & 2) << 39)
    dst_w |= ((res6 & 4) << 53)
    dst_c |= ((res6 & 8) << 45)
    qind7 = ((src_c & 1536) >> 7) | ((src_c & 393216) >> 13)
    res7 = ((rule & (15 << qind7)) >> qind7)
    dst_c |= ((res7 & 3) << 9)
    dst_c |= ((res7 & 12) << 15)
    qind8 = ((src_c & 6144) >> 9) | ((src_c & 1572864) >> 15)
    res8 = ((rule & (15 << qind8)) >> qind8)
    dst_c |= ((res8 & 3) << 11)
    dst_c |= ((res8 & 12) << 17)
    qind9 = ((src_c & 24576) >> 11) | ((src_c & 6291456) >> 17)
    res9 = ((rule & (15 << qind9)) >> qind9)
    dst_c |= ((res9 & 3) << 13)
    dst_c |= ((res9 & 12) << 19)
    qind10 = ((src_c & 100663296) >> 23) | ((src_c & 25769803776) >> 29)
    res10 = ((rule & (15 << qind10)) >> qind10)
    dst_c |= ((res10 & 3) << 25)
    dst_c |= ((res10 & 12) << 31)
    qind11 = ((src_c & 402653184) >> 25) | ((src_c & 103079215104) >> 31)
    res11 = ((rule & (15 << qind11)) >> qind11)
    dst_c |= ((res11 & 3) << 27)
    dst_c |= ((res11 & 12) << 33)
    qind12 = ((src_c & 1610612736) >> 27) | ((src_c & 412316860416) >> 33)
    res12 = ((rule & (15 << qind12)) >> qind12)
    dst_c |= ((res12 & 3) << 29)
    dst_c |= ((res12 & 12) << 35)
    qind13 = ((src_c & 6597069766656) >> 39) | ((src_c & 1688849860263936) >> 45)
    res13 = ((rule & (15 << qind13)) >> qind13)
    dst_c |= ((res13 & 3) << 41)
    dst_c |= ((res13 & 12) << 47)
    qind14 = ((src_c & 26388279066624) >> 41) | ((src_c & 6755399441055744) >> 47)
    res14 = ((rule & (15 << qind14)) >> qind14)
    dst_c |= ((res14 & 3) << 43)
    dst_c |= ((res14 & 12) << 49)
    qind15 = ((src_c & 105553116266496) >> 43) | ((src_c & 27021597764222976) >> 49)
    res15 = ((rule & (15 << qind15)) >> qind15)
    dst_c |= ((res15 & 3) << 45)
    dst_c |= ((res15 & 12) << 51)
    return (dst_c, dst_n, dst_nw, dst_w)

